version: '3'
services:  
  db:    
    image: mongo:3.6
    hostname: mongo
    volumes:
      - ./:/clashstats

  web:
    env_file: .env          
    restart: 'no'
    #command: 'python main.py'
    depends_on: 
      - db
    ports:
      - "8000:80"              
    volumes:
      - ./app:/app
      - ./caddy/Caddyfile.local:/etc/Caddyfile
      - /tmp/mongodb-27017.sock:/tmp/mongodb-27017.sock

  scheduler:
    env_file: .env      
    restart: 'no'    
    volumes:
      - ./app:/app
    depends_on: 
      - db  
